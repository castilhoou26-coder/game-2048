<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>2048 Game</title>
<style>
    body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #faf8ef; }
    #game { display: grid; grid-template-columns: repeat(4, 80px); grid-gap: 10px; }
    .tile { width: 80px; height: 80px; background: #cdc1b4; display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: bold; color: #776e65; border-radius: 5px; }
</style>
</head>
<body>

<div id="game"></div>

<script>
let tabuleiro = [
    [0,0,0,0],
    [0,0,0,0],
    [0,0,0,0],
    [0,0,0,0]
];

function addNumero() {
    let vazios = [];
    for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
            if (tabuleiro[i][j] === 0) vazios.push([i,j]);
        }
    }
    if (vazios.length > 0) {
        let [i,j] = vazios[Math.floor(Math.random() * vazios.length)];
        tabuleiro[i][j] = Math.random() < 0.9 ? 2 : 4;
    }
}

function render() {
    const gameDiv = document.getElementById('game');
    gameDiv.innerHTML = '';
    for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.textContent = tabuleiro[i][j] === 0 ? '' : tabuleiro[i][j];
            gameDiv.appendChild(tile);
        }
    }
}

function moverEsquerda() {
    for (let i = 0; i < 4; i++) {
        let linha = tabuleiro[i].filter(n => n !== 0);
        for (let j = 0; j < linha.length-1; j++) {
            if (linha[j] === linha[j+1]) {
                linha[j] *= 2;
                linha[j+1] = 0;
            }
        }
        linha = linha.filter(n => n !== 0);
        while (linha.length < 4) linha.push(0);
        tabuleiro[i] = linha;
    }
}

function moverDireita() {
    for (let i = 0; i < 4; i++) {
        tabuleiro[i].reverse();
        moverEsquerda();
        tabuleiro[i].reverse();
    }
}

function transpor() {
    tabuleiro = tabuleiro[0].map((_, i) => tabuleiro.map(linha => linha[i]));
}

function moverCima() {
    transpor();
    moverEsquerda();
    transpor();
}

function moverBaixo() {
    transpor();
    moverDireita();
    transpor();
}

document.addEventListener('keydown', (e) => {
    switch(e.key) {
        case 'ArrowLeft': moverEsquerda(); break;
        case 'ArrowRight': moverDireita(); break;
        case 'ArrowUp': moverCima(); break;
        case 'ArrowDown': moverBaixo(); break;
        default: return;
    }
    addNumero();
    render();
    checkGameOver();
});

function checkGameOver() {
    for (let i=0;i<4;i++){
        for (let j=0;j<4;j++){
            if(tabuleiro[i][j] === 2048) alert("ðŸŽ‰ PARABÃ‰NS! VocÃª chegou a 2048!");
        }
    }
}

addNumero();
addNumero();
render();
</script>

</body>
</html>
